<?xml version="1.0" encoding="UTF-8"?>
<hdevelop file_version="1.2" halcon_version="18.11.1.1">
<procedure name="test_barcode">
<interface>
<io>
<par name="Image" base_type="iconic" dimension="0"/>
</io>
<ic>
<par name="WindowHandle" base_type="ctrl" dimension="0"/>
</ic>
</interface>
<body>
<c></c>
<c>** 测试用</c>
<l>* NumFailure := 0</l>
<l>Failure := 0</l>
<l>flagSeg := 1</l>
<c>** Init</c>
<l>get_image_size (Image, Width, Height)</l>
<c>*** 增强算法</c>
<c>** 分割</c>
<l>if (flagSeg == 1)</l>
<l>     image_seg_paper (Image, paper, WindowHandle, 1)</l>
<l>    get_image_size (paper, paperWidth, paperHeight)</l>
<l>*     dev_display (Image)</l>
<l>*     scale_image (Image, Image, 1.8, -100)</l>
<l>*     binary_threshold (Image, Region, 'max_separability', 'dark', UsedThreshold)</l>
<l>    Image := paper</l>
<l>endif</l>
<c>    </c>
<c>** 预处理</c>
<l>*      equ_histo_image (Image, ImageEquHisto)</l>
<c>     </c>
<c>** 裁剪方法识别条码    27/118</c>
<l>*     gen_rectangle1 (Rectangle, 0, paperWidth/2, paperHeight/3, paperWidth)</l>
<l>*     reduce_domain(paper,Rectangle,Mask)      //裁剪区域</l>
<l>*     crop_domain(Mask, paper)                  //切割图像 </l>
<c>** 二值化    0806 37/179</c>
<l>*     binary_threshold (Image, Region, 'max_separability', 'light', UsedThreshold)</l>
<l>*     region_to_bin (Region, BinImage, 255, 0, Width, Height)</l>
<c>     </c>
<c>** Init Barcode这行代码放到初始化位置,函数最上边,打开相机之前</c>
<c></c>
<l>set_current_dir ('C:/Users/iwake/OneDrive - wake/Desktop/HalconPractise/HalconProj/Barcode')</l>
<l>read_bar_code_model ('BarCodeHandle.bcm', BarCodeHandle)</l>
<l>* read_bar_code_model ('BarCodeHandle0605.bcm', BarCodeHandle)</l>
<l>* set_bar_code_param (BarCodeHandle, 'check_char', 'present')</l>
<l>* set_bar_code_param (BarCodeHandle, 'quiet_zone',true)</l>
<l>* set_bar_code_param (BarCodeHandle, 'timeout', 50) </l>
<l>* set_bar_code_param (BarCodeHandle, 'majority_voting', true) </l>
<l>set_bar_code_param (BarCodeHandle, 'num_scanlines', 30) </l>
<l>* set_bar_code_param (BarCodeHandle, 'start_stop_tolerance', 'low') </l>
<l>* set_bar_code_param (BarCodeHandle, 'contrast_min', 2) </l>
<l>* set_bar_code_param (BarCodeHandle, 'timeout', 50) </l>
<c></c>
<c>** Recognition Barcode这行代码什么时候想识别二维码放到那里,输入Image,BarCodeHandle, WindowHandle,</c>
<c>**输出SymbolRegions,DecodedDataStrings, BarcodeLocation</c>
<c></c>
<l>image_get_bar (Image, SymbolRegions, BarCodeHandle, WindowHandle, DecodedDataStrings, BarcodeLocation)</l>
<c></c>
<l>return ()</l>
</body>
<docu id="test_barcode">
<parameters>
<parameter id="Image"/>
<parameter id="WindowHandle"/>
</parameters>
</docu>
</procedure>
</hdevelop>
